# さくらレンタルサーバー向け代替設定
<IfModule mod_rewrite.c>
    RewriteEngine On

    # HTTPSを強制
    RewriteCond %{HTTPS} off
    RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

    # publicディレクトリを隠してルートディレクトリのように見せる
    RewriteCond %{THE_REQUEST} \s/+public/(\S*) [NC]
    RewriteRule ^ /%1 [R=301,L]

    # 実際のファイルが存在するかチェック
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    # すべてのリクエストをpublic/index.phpに転送
    RewriteRule ^(.*)$ public/index.php [QSA,L]
</IfModule>